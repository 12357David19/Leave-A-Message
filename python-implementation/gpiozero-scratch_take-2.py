from gpiozero import Button,LED
import time

BANNER = """
    ___       _______   ________  ___      ___ _______           ________          _____ ______   _______   ________   ________  ________  ________  _______      
    |\  \     |\  ___ \ |\   __  \|\  \    /  /|\  ___ \         |\   __  \        |\   _ \  _   \|\  ___ \ |\   ____\ |\   ____\|\   __  \|\   ____\|\  ___ \     
    \ \  \    \ \   __/|\ \  \|\  \ \  \  /  / | \   __/|        \ \  \|\  \       \ \  \\\__\ \  \ \   __/|\ \  \___|_\ \  \___|\ \  \|\  \ \  \___|\ \   __/|    
     \ \  \    \ \  \_|/_\ \   __  \ \  \/  / / \ \  \_|/__       \ \   __  \       \ \  \\|__| \  \ \  \_|/_\ \_____  \\ \_____  \ \   __  \ \  \  __\ \  \_|/__  
      \ \  \____\ \  \_|\ \ \  \ \  \ \    / /   \ \  \_|\ \       \ \  \ \  \       \ \  \    \ \  \ \  \_|\ \|____|\  \\|____|\  \ \  \ \  \ \  \|\  \ \  \_|\ \ 
       \ \_______\ \_______\ \__\ \__\ \__/ /     \ \_______\       \ \__\ \__\       \ \__\    \ \__\ \_______\____\_\  \ ____\_\  \ \__\ \__\ \_______\ \_______\
        \|_______|\|_______|\|__|\|__|\|__|/       \|_______|        \|__|\|__|        \|__|     \|__|\|_______|\_________\\_________\|__|\|__|\|_______|\|_______|
                                                                                                               \|_________\|_________|                             
                                                                                                                                                                
    TM
"""




def main():
    print(BANNER)
    btn = Button(4)
    led = LED(2)
    while True:
        btn.wait_for_press(timeout=None)
        led.on()
        print("switch is on!")
        time_string = time.strftime("%Y%m%d-%H%M%S")
        recording_filename = f"leave-a-message-{time_string}.wav"
        print(f"Audio is being recorded to:{recording_filename}")

        btn.wait_for_release(timeout=300)
        led.off()
        print("switch is off!")

if __name__ == "__main__":
    main()